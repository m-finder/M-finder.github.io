---
title: php å’Œè®¾è®¡æ¨¡å¼ - è®¾è®¡åŽŸåˆ™
date: 2021-03-21 14:35:02
categories:
- è®¾è®¡æ¨¡å¼
tags: 
---

è®¾è®¡æ¨¡å¼æ˜¯ä¸€å¥—è¢«åå¤ä½¿ç”¨ã€å¤šæ•°äººçŸ¥æ™“ã€ç»è¿‡åˆ†ç±»ç¼–ç›®çš„ã€ä»£ç è®¾è®¡ç»éªŒçš„æ€»ç»“ã€‚ä½¿ç”¨è®¾è®¡æ¨¡å¼æ˜¯ä¸ºäº† `æé«˜ä»£ç å¤ç”¨æ€§` å’Œ `çµæ´»æ€§`ï¼Œè®©ä»£ç æ›´å®¹æ˜“è¢«ä»–äººç†è§£ã€ä¿è¯ä»£ç  `å¯é æ€§`ã€‚

ä¸ºäº†å®žçŽ°ä»£ç çš„ `å¯å¤ç”¨æ€§` å’Œ `çµæ´»æ€§`ã€‚`è®¾è®¡æ¨¡å¼` æå‡ºäº†ä¸€äº›å…³é”®çš„ `é¢å‘å¯¹è±¡è®¾è®¡åŽŸåˆ™`ã€‚


#### å•ä¸€èŒè´£

å…¶æ ¸å¿ƒæ€æƒ³ä¸ºï¼šä¸€ä¸ªç±»ï¼Œæœ€å¥½åªåšä¸€ä»¶äº‹ï¼Œåº”è¯¥ä»…æœ‰ä¸€ä¸ªå¼•èµ·å®ƒå˜åŒ–çš„åŽŸå› ã€‚

å¯ä»¥ç†è§£ä¸ºï¼Œä¸€ä¸ªç±»ï¼Œåº”è¯¥æ˜¯ä¸€ç»„ `ç›¸å…³æ€§å¾ˆé«˜` çš„æ–¹æ³•åŠæ•°æ®çš„å°è£…ã€‚

å½“ä¸€ä¸ªç±»æ‰¿æ‹…çš„èŒè´£è¿‡å¤šæ—¶ï¼Œå°±ç›¸å½“äºŽæŠŠè¿™äº›èŒè´£è€¦åˆåœ¨äº†ä¸€èµ·ï¼Œå½“å…¶ä¸­ä¸€ä¸ªèŒè´£å‘ç”Ÿå˜åŠ¨ï¼Œå¯èƒ½ä¼šå¯¹å…¶ä»–èŒè´£é€ æˆå½±å“ã€‚

ç±»çš„èŒè´£åŒ…æ‹¬ä¸¤ä¸ªæ–¹é¢ï¼Œæ•°æ®èŒè´£å’Œè¡Œä¸ºèŒè´£ï¼Œæ•°æ®èŒè´£é€šè¿‡ç±»çš„å±žæ€§å®žçŽ°ï¼Œè¡Œä¸ºèŒè´£é€šè¿‡å…¶æ–¹æ³•å®žçŽ°ã€‚

å•ä¸€èŒè´£æ˜¯å®žçŽ°é«˜å†…èšã€ä½Žè€¦åˆçš„æŒ‡å¯¼æ–¹é’ˆã€‚å®ƒæ˜¯æœ€ç®€å•ä½†åˆæœ€éš¾å®žçŽ°çš„åŽŸåˆ™ï¼Œéœ€è¦å¼€å‘äººå‘˜å‘çŽ°ç±»çš„çš„ä¸åŒèŒè´£å¹¶å°†å…¶åˆ†ç¦»ã€‚

ä¸¾ä¸ªðŸŒ°ï¼šç™»é™†æ¨¡å—æ˜¾ç¤ºç™»å½•é¡µé¢ï¼Œæ ¡éªŒç™»å½•å‚æ•°ï¼Œè¿žæŽ¥æ•°æ®åº“ï¼ŒæŸ¥æ‰¾ç”¨æˆ·ï¼Œè¿”å›žç»“æžœã€‚

åŠŸèƒ½å¤ªè¿‡è€¦åˆï¼Œæ‹†åˆ†æˆå¤šä¸ªæ¨¡å—ã€‚


#### å¼€é—­åŽŸåˆ™

å¼€é—­åŽŸåˆ™æ˜¯é¢å‘å¯¹è±¡ä¸­æœ€é‡è¦çš„åŽŸåˆ™ã€‚

ä¸€ä¸ªè½¯ä»¶åº”å½“å¯¹æ‰©å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å…³é—­ã€‚ä¹Ÿå°±æ˜¯è¯´åœ¨è®¾è®¡ä¸€ä¸ªæ¨¡å—çš„æ—¶å€™ï¼Œåº”è¯¥ä½¿è¿™ä¸ªæ¨¡å—å¯ä»¥åœ¨ä¸è¢«ä¿®æ”¹çš„å‰æä¸‹è¿›è¡Œæ‰©å±•ã€‚

ä¸€ä¸ªç±»ä¸€æ—¦å¼€å‘å®Œæˆï¼ŒåŽç»­æ–°å¢žçš„åŠŸèƒ½å°±ä¸åº”è¯¥é€šè¿‡ä¿®æ”¹è¿™ä¸ªç±»æ¥å®Œæˆï¼Œè€Œæ˜¯åº”è¯¥é€šè¿‡ç»§æ‰¿å¢žåŠ æ–°çš„ç±»ã€‚ä¸ºä»€ä¹ˆè¦å¯¹ä¿®æ”¹å…³é—­å‘¢ï¼Ÿå› ä¸ºä¸€æ—¦ä¿®æ”¹æŸä¸ªç±»ï¼Œå°±å¯èƒ½ç ´åäº†ç³»ç»ŸåŽŸæœ‰åŠŸèƒ½ï¼Œå°±éœ€è¦é‡æ–°æµ‹è¯•ã€‚

`æŠ½è±¡åŒ–` æ˜¯å¼€é—­åŽŸåˆ™çš„å…³é”®ã€‚ä»€ä¹ˆæ˜¯æŠ½è±¡åŒ–ï¼Œå°±æ˜¯æŠŠä¸€ä¸ªæˆ–å¤šä¸ªç±»ä¸­çš„å…¬å…±çš„ã€æœ‰å…±æ€§çš„ä¸œè¥¿æŠ½å–å‡ºæ¥ã€‚æŠ½è±¡çš„æœ€å¤§å¥½å¤„åœ¨äºŽå®ƒæ˜¯æŠ½è±¡çš„ã€ç¨³å®šçš„ï¼Œä¸å®¹æ˜“å‘ç”Ÿæ”¹å˜çš„ã€‚å®žçŽ°å¼€é—­åŽŸåˆ™çš„æ ¸å¿ƒæ€æƒ³å°±æ˜¯ `é¢å‘æŽ¥å£ç¼–ç¨‹`ï¼Œè€Œä¸æ˜¯å…·ä½“å®žçŽ°ã€‚

å¼€é—­åŽŸåˆ™å¯ä»¥ç”¨ä¸€ä¸ªæ›´åŠ å…·ä½“çš„åŽŸåˆ™æ¥æè¿°ï¼š`å¯å˜æ€§å°è£…`ã€‚ä¹Ÿå°±æ˜¯æ‰¾åˆ°ç³»ç»Ÿä¸­çš„å¯å˜å› ç´ å¹¶æŠŠå®ƒå°è£…èµ·æ¥ã€‚

ä¸Šä¸€ç¯‡ä¸­æåˆ°çš„ç¯æ˜¯ä¸ªç»ä½³çš„ðŸŒ°ã€‚

#### é‡Œæ°æ›¿æ¢
æ‰€æœ‰å¼•ç”¨åŸºç±»ï¼ˆçˆ¶ç±»ï¼‰çš„åœ°æ–¹å¿…é¡»èƒ½é€æ˜Žçš„ä½¿ç”¨å…¶å­ç±»çš„å¯¹è±¡ã€‚

è¿™å¥è¯æ€Žä¹ˆç†è§£å‘¢ï¼Ÿé€šä¿—æ¥è®²å°±æ˜¯åœ¨è½¯ä»¶ä¸­å¦‚æžœèƒ½å¤Ÿä½¿ç”¨åŸºç±»å¯¹è±¡ï¼Œé‚£ä¹ˆä¸€å®šä¹Ÿå¯ä»¥ä½¿ç”¨å…¶å­ç±»å¯¹è±¡ã€‚æŠŠåŸºç±»éƒ½æ›¿æ¢ä¸ºå®ƒçš„å­ç±»å¯¹è±¡ï¼Œç¨‹åºä¸ä¼šäº§ç”Ÿä»»ä½•é”™è¯¯å’Œå¼‚å¸¸ã€‚åè¿‡æ¥åˆ™ä¸æˆç«‹ã€‚

é‡Œæ°æ›¿æ¢åº”è¯¥æ˜¯å¼€é—­åŽŸåˆ™çš„ä¸€ä¸ªæ‰©å±•ï¼Œç”±äºŽä½¿ç”¨åŸºç±»å¯¹è±¡çš„åœ°æ–¹éƒ½å¯ä»¥ä½¿ç”¨å…¶å­ç±»å¯¹è±¡ï¼Œå› æ­¤åœ¨ç¨‹åºä¸­å°½é‡ä»¥åŸºç±»ç±»åž‹æ¥å¯¹å¯¹è±¡è¿›è¡Œå®šä¹‰ï¼Œè€Œåœ¨è¿è¡Œæ—¶å†ç”¨å…¶å­ç±»å¯¹è±¡æ›¿æ¢åŸºç±»å¯¹è±¡ã€‚

å…¶ä¸­æœ‰ä¸€ç‚¹å¾ˆå…³é”®ï¼Œé‡Œæ°æ›¿æ¢åŽŸåˆ™å¼ºè°ƒå­ç±»å°½é‡ä½¿ç”¨åŸºç±»ä¸­çš„æ–¹æ³•ï¼Œè€Œä¸æ˜¯é‡å†™ï¼Œé™¤éžå­ç±»æœ‰å…¶ç‰¹æ®Šæ€§ã€‚

ä¸¾ä¸ªðŸŒ°ï¼Œä¾ç„¶æ˜¯ä¸Šä¸€ç¯‡æåˆ°çš„ç¯ï¼Œä½†æ˜¯åŠ äº†ä¸€ç‚¹æ”¹åŠ¨ï¼š
```php
class Light
{
    function show()
    {
        echo 'ç¯å…‰éšæœº', PHP_EOL;
    }
}

class BlueLight extends Light
{
    function show()
    {
        echo 'è“è‰²', PHP_EOL;
    }
}

class RedLight extends Light
{
    private bool $power = false;

    public function hasPower(): bool
    {
        return $this->power;
    }

    /**
     * @throws Exception
     */
    function show()
    {
        if(!$this->hasPower()){
            throw new Exception('æ²¡ç”µäº†ï¼Œäº®ä¸èµ·æ¥');
        }
        echo 'çº¢è‰²', PHP_EOL;
    }
}

class User
{
    function openLight(Light $light)
    {
        $light->show();
    }
}

$user = new User();
$light = new Light();
$blueLight = new BlueLight();
$redLight = new RedLight();

$user->openLight($light);
$user->openLight($blueLight);
$user->openLight($redLight);
```

![uml](/images/uml.png)

æ ¹æ®é‡Œæ°æ›¿æ¢åŽŸåˆ™ï¼Œå­ç±»å¿…é¡»èƒ½å¤Ÿæ›¿ä»£çˆ¶ç±»ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œè™½ç„¶å­ç±»é‡å†™äº†çˆ¶ç±»çš„æ–¹æ³•ï¼Œä½†æ˜¯åœ¨èƒ½å¤Ÿä½¿ç”¨çˆ¶ç±»çš„åœºæ™¯é‡Œé¢ï¼Œä¹Ÿä¸€å®šè¦èƒ½å¤Ÿä½¿ç”¨å­ç±»ã€‚å¾ˆæ˜¾ç„¶ï¼ŒBlueLight ç±»ç¬¦åˆåŽŸåˆ™ï¼ŒRedLight ç±»è™½ç„¶ä¹Ÿå®žçŽ°äº†çˆ¶ç±»æ–¹æ³•ï¼Œä½†æ˜¯æŠ›å‡ºäº†çˆ¶ç±»æ²¡æœ‰çš„å¼‚å¸¸ï¼Œæ‰€ä»¥è¿åäº†é‡Œæ°æ›¿æ¢åŽŸåˆ™ï¼Œåœ¨ User ç±»ä¸­ï¼Œæˆ‘ä»¬æ— è®ºæ˜¯ä¼ å…¥ Light åŸºç±»å¯¹è±¡ï¼Œè¿˜æ˜¯ BlueLight ç±»å¯¹è±¡ï¼Œéƒ½æ˜¯æ²¡æœ‰ä»»ä½•é”™è¯¯å’Œå¼‚å¸¸çš„ã€‚

ç”±ä»¥ä¸Šå®žä¾‹ï¼Œæˆ‘ä»¬å¯ä»¥æ€»ç»“å‡ºï¼Œé‡Œæ°æ›¿æ¢åŽŸåˆ™æœ¬è´¨æ˜¯å¯¹ç»§æ‰¿çš„çº¦æŸã€‚

#### ä¾èµ–å€’ç½®

ä¾èµ–äºŽæŠ½è±¡å±‚ï¼Œä¸ä¾èµ–äºŽå…·ä½“ã€‚å³é«˜å±‚æ¬¡çš„æ¨¡å—ä¸åº”è¯¥ä¾èµ–ä½Žå±‚æ¬¡æ¨¡å—ã€‚
æŠ½è±¡ä¸åº”è¯¥ä¾èµ–äºŽç»†èŠ‚ï¼Œç»†èŠ‚åº”è¯¥ä¾èµ–äºŽæŠ½è±¡ã€‚

è¦é¢å‘æŽ¥å£ç¼–ç¨‹ï¼Œè€Œä¸æ˜¯é¢å‘å®žçŽ°ç¼–ç¨‹ã€‚

ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬è®¤ä¸ºè°ƒç”¨è€…æ˜¯é«˜å±‚æ¨¡å—ï¼Œè¢«è°ƒç”¨è€…æ˜¯åº•å±‚æ¨¡å—ã€‚

å®žçŽ°å¼€é—­åŽŸåˆ™çš„å…³é”®æ˜¯æŠ½è±¡åŒ–ï¼Œå¦‚æžœè¯´å®žçŽ°å¼€é—­åŽŸåˆ™æ˜¯é¢å‘å¯¹è±¡ç¼–ç¨‹çš„ç›®æ ‡ï¼Œé‚£ä¹ˆä¾èµ–å€’ç½®å°±æ˜¯é¢å‘å¯¹è±¡ç¼–ç¨‹çš„ä¸»è¦æ‰‹æ®µã€‚å¸¸ç”¨çš„æ‰‹æ®µä¸ºåœ¨ä»£ç ä¸­ä½¿ç”¨æŠ½è±¡ç±»ï¼Œå°†å…·ä½“å®žçŽ°æ”¾å…¥å…ƒæ•°æ®ã€‚

å†å¼ºè°ƒä¸€éï¼ŒæŠ½è±¡æ˜¯ç›¸å¯¹ç¨³å®šçš„ï¼Œä¸å®¹æ˜“å‘ç”Ÿæ”¹å˜ã€‚

å†ä¸¾ä¸ªðŸŒ°ï¼š
```php
class Book
{
    public function getContent()
    {
        echo 'long long ago, é¥è¿œçš„ä¸œæ–¹æœ‰ä¸€ä¸ªç‰¹åˆ«è‹±ä¿Šå¸…æ°”çš„å°ä¼™', PHP_EOL;
    }
}

class Mother
{
    public function narrate(Book $book)
    {
        $book->getContent();
    }
}

class Paper
{
    public function getContent()
    {
        echo 'ä¸Šå‘¨äº”ï¼Œä¸­å›½é¦–æ¬¡å®žçŽ°ç»æµŽåè¶…ç¾Žå›½ç§°ä¸ºä¸–ç•Œç¬¬ä¸€ç»æµŽä½“', PHP_EOL;
    }
}
$mother = new Mother();
$mother->narrate(new Book());
```
åœ¨ä¸Šè¾¹çš„ä¾‹å­ä¸­ï¼Œéº»éº»çœ‹ä¹¦è®²æ•…äº‹ï¼Œå¦‚æžœæœ‰ä¸€å¤©ï¼Œä¹¦çœ‹çƒ¦äº†ï¼Œæƒ³çœ‹ä¸ªæŠ¥çº¸ï¼Œä½†æ˜¯éº»éº»åšä¸åˆ°ï¼Œå› ä¸ºè¦è¯»æŠ¥çº¸é¦–å…ˆè¦æŠŠéº»éº»æ”¹æŽ‰ã€‚è¿™å°±æœ‰ç‚¹è’è°¬ã€‚æ˜¾ç¤ºä¸æ˜¯ä¸€ä¸ªå¥½çš„è®¾è®¡ï¼ŒåŽŸå› å°±æ˜¯éº»éº»å’Œä¹¦ä¹‹é—´çš„è€¦åˆç¨‹åº¦å¤ªé«˜äº†ï¼Œå¿…é¡»é™ä½Žä»–ä»¬ä¹‹é—´çš„è€¦åˆåº¦ã€‚

æˆ‘ä»¬æ¥åšä¸‹è°ƒæ•´ï¼š
```php
interface Reader
{
    public function getContent();
}

class Book implements Reader
{
    public function getContent()
    {
        echo 'long long ago, é¥è¿œçš„ä¸œæ–¹æœ‰ä¸€ä¸ªç‰¹åˆ«è‹±ä¿Šå¸…æ°”çš„å°ä¼™', PHP_EOL;
    }
}

class Paper implements Reader
{
    public function getContent()
    {
        echo 'ä¸Šå‘¨äº”ï¼Œä¸­å›½é¦–æ¬¡å®žçŽ°ç»æµŽåè¶…ç¾Žå›½ç§°ä¸ºä¸–ç•Œç¬¬ä¸€ç»æµŽä½“', PHP_EOL;
    }
}

class Mother
{
    public function narrate(Reader $reader)
    {
        $reader->getContent();
    }
}

$mother = new Mother();
$mother->narrate(new Book());
$mother->narrate(new Paper());
```
é¦–å…ˆï¼Œæˆ‘ä»¬æŠ½å–å‡ºä¸€ä¸ªæŽ¥å£ç±» `Reader`ï¼Œç„¶åŽ Book å’Œ Paper åˆ†åˆ«åŽ»å®žçŽ°å®ƒã€‚ç„¶åŽå°† Mother è°ƒæ•´ä¸ºä¾èµ–äºŽæŽ¥å£ã€‚
çŽ°åœ¨ï¼Œæ— è®ºæ˜¯æƒ³çœ‹ä¹¦è¿˜æ˜¯æƒ³çœ‹æŠ¥çº¸ï¼Œåˆæˆ–è€…æƒ³çœ‹è¿žçŽ¯ç”»ï¼Œæˆ‘ä»¬åªè¦åŽ»å®žçŽ° Reader å³å¯ï¼Œå†ä¹Ÿä¸ç”¨æ”¹åŠ¨ Mother äº†ã€‚

ä¸Šè¾¹é‡Œæ°æ›¿æ¢ä¸­ç¯çš„ä¾‹å­å…¶å®žå·²ç»ç¬¦åˆä¾èµ–å€’ç½®åŽŸåˆ™ï¼Œä½†æ˜¯çœ‹åˆ°è¿™ä¸ªä¾‹å­æ›´ç”ŸåŠ¨ï¼Œæ›´å®¹æ˜“ç†è§£ï¼Œæ‰€ä»¥å°±èµ˜è¿°äº†ä¸€ä¸‹ã€‚

> ä¼ é€’ä¾èµ–å…³ç³»çš„æ–¹å¼æœ‰ä¸‰ç§ï¼Œä¸Šè¾¹çš„ä¾‹å­ä¸­ä½¿ç”¨çš„æŽ¥å£ä¼ é€’ï¼Œè¿˜æœ‰æž„é€ å‡½æ•°ä¼ é€’å’Œ setter ä¼ é€’ã€‚


#### æŽ¥å£éš”ç¦»

å®¢æˆ·ç«¯ä¸åº”è¯¥ä¾èµ–å®ƒä¸éœ€è¦çš„æŽ¥å£ã€‚

ä½¿ç”¨å¤šä¸ªä¸“é—¨çš„æŽ¥å£ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªå¤§çš„å•ä¸€çš„æŽ¥å£ã€‚

çœ‹ä¸ŠåŽ»ä¼¼ä¹Žå’Œå•ä¸€èŒè´£å¾ˆåƒï¼Œä½†æ˜¯ä¸æ˜¯ï¼Œå•ä¸€èŒè´£é’ˆå¯¹çš„æ˜¯ç±»çš„èŒè´£ï¼ŒæŽ¥å£éš”ç¦»é’ˆå¯¹çš„åˆ™æ˜¯æŽ¥å£ã€‚

ä¸¾ä¸ªðŸŒ°ï¼š
```php
interface WorkerInterface
{
    public function work();

    public function sleep();
}

class HumanWorker implements WorkerInterface
{

    public function work()
    {
        echo 'I like working', PHP_EOL;
    }

    public function sleep()
    {
        echo 'I like sleeping', PHP_EOL;
    }
}

class RobotWorker implements WorkerInterface
{
    public function work()
    {
        echo 'I like working', PHP_EOL;
    }

    public function sleep()
    {
        echo 'robot never sleep', PHP_EOL;
    }
}
```
ä¸Šè¾¹çš„ä¾‹å­ä¸­ï¼Œæœ‰ä¸ªå¾ˆæ˜Žæ˜¾çš„ç¼ºç‚¹ï¼Œæœºå™¨äººä¸éœ€è¦ç¡è§‰ï¼Œä½†æ˜¯å®ƒå´å¿…é¡»å®žçŽ°ç¡è§‰çš„æ–¹æ³•ï¼Œè¿™æ˜¾ç„¶è¿åäº†æŽ¥å£éš”ç¦»ã€‚

é‚£ä¹ˆï¼Œæˆ‘ä»¬å†è°ƒæ•´ä¸€ä¸‹ï¼š
```php
interface WorkInterface
{
    public function work();

}

interface SleepInterface
{
    public function sleep();
}

class HumanWorker implements WorkInterface, SleepInterface
{

    public function work()
    {
        echo 'I like working', PHP_EOL;
    }

    public function sleep()
    {
        echo 'I like sleeping', PHP_EOL;
    }
}

class RobotWorker implements WorkInterface
{
    public function work()
    {
        echo 'I like working', PHP_EOL;
    }
}
```
è°ƒæ•´åŽï¼ŒæŽ¥å£ä¸€åˆ†ä¸ºäºŒï¼Œå®žé™…ä½¿ç”¨æ—¶å„å–æ‰€éœ€ï¼Œä¸å†è¢«è¿«å®žçŽ°è‡ªå·±ä¸éœ€è¦çš„æŽ¥å£ã€‚

#### åˆæˆå¤ç”¨
é¢å‘å¯¹è±¡æœ‰ä¸¤ç§æ–¹å¼å®žçŽ°ä»£ç å¤ç”¨ï¼Œä¸€æ˜¯ç»§æ‰¿ï¼ŒäºŒè¿˜æ˜¯ç»§æ‰¿ï¼Œå“¦ä¸ï¼Œè€Œæ˜¯ç»„åˆ/èšåˆï¼Œä¹Ÿå¯ä»¥å«åšåˆæˆã€‚
åˆæˆå¤ç”¨åŽŸåˆ™è¦æ±‚åœ¨è½¯ä»¶å¤ç”¨æ—¶ï¼Œé¦–å…ˆè€ƒè™‘ä½¿ç”¨ç»„åˆã€èšåˆç­‰å…³è”æ–¹å¼å®žçŽ°ï¼Œå…¶æ¬¡æ‰è€ƒè™‘ä½¿ç”¨ç»§æ‰¿ã€‚ä¹Ÿå°±æ˜¯åœ¨ä¸€ä¸ªæ–°å¯¹è±¡é‡Œé€šè¿‡å…³è”æ–¹å¼ä½¿ç”¨å·²æœ‰å¯¹è±¡çš„æ–¹æ³•å’ŒåŠŸèƒ½ã€‚

é‚£ä¹ˆä¸ºä»€ä¹ˆæŽ¨èä½¿ç”¨ç»„åˆå‘¢ï¼Œé¦–å…ˆï¼Œç»§æ‰¿åŽï¼Œçˆ¶ç±»çš„æ–¹æ³•æš´éœ²ç»™äº†å­ç±»ï¼Œè¿™ç­‰äºŽç ´åäº†ç±»çš„å°è£…æ€§ï¼Œæ‰€ä»¥ç»§æ‰¿å¤ç”¨ä¹Ÿè¢«ç§°ä¸ºç™½ç®±å¤ç”¨ã€‚å…¶æ¬¡ï¼Œçˆ¶ç±»çš„æ–¹æ³•å‘ç”Ÿå˜åŠ¨ä¼šå½±å“åˆ°å­ç±»ï¼Œå±žäºŽè€¦åˆåº¦è¾ƒé«˜çš„ä¸€ç§è¡¨çŽ°ï¼Œä¸åˆ©äºŽä»£ç çš„ç»´æŠ¤ã€‚æœ€åŽï¼Œç»§æ‰¿è‡ªåŸºç±»çš„æ–¹æ³•æ˜¯é™æ€çš„ï¼Œé™åˆ¶äº†å¤ç”¨çš„çµæ´»æ€§ã€‚

![ç»§æ‰¿](/images/extend.jpg)

![ç»„åˆ](/images/multiplexing.jpg)

ä¸Šä¸ªå›¾å§ï¼Œä¾‹å­æŒºæ¸…æ™°çš„ã€‚[å›¾ç‰‡å‡ºå¤„](http://c.biancheng.net/view/1333.html)

emmmï¼Œå‰è¾¹åå¤æçš„ç¯çš„ä¾‹å­å°±ä¸å¤ªç¬¦åˆåˆæˆå¤ç”¨åŽŸåˆ™äº†ã€‚

æœ‰å…´è¶£çš„å¯ä»¥è‡ªå·±æ”¹é€ ä¸€ä¸‹ã€‚

#### è¿ªç±³ç‰¹æ³•åˆ™
è¿ªç±³ç‰¹æ³•åˆ™åˆå«æœ€å°‘çŸ¥é“åŽŸåˆ™ï¼Œå®ƒå¼ºè°ƒæ¯ä¸€ä¸ªç±»åº”å½“å¯¹å…¶å®ƒç±»æœ‰å°½å¯èƒ½å°‘çš„äº†è§£ï¼Œä¸å’Œé™Œç”Ÿäººè¯´è¯ã€‚ä¹Ÿå°±æ˜¯å°½å¯èƒ½å°‘çš„äº§ç”Ÿä¾èµ–ã€‚

A å’Œ B äº§ç”Ÿäº¤äº’ï¼ŒB å’Œ C äº§ç”Ÿäº¤äº’ï¼ŒA åªå’Œ B äº¤äº’ï¼Œä¸è·Ÿ C çŽ©ã€‚

è¿™ä¸ªæ³•åˆ™å°±æ¯”è¾ƒæžï¼Œåˆ†äº†ç‹­ä¹‰å’Œå¹¿ä¹‰ï¼Œæ€Žä¹ˆæ¥çš„æ²¡æžæ¸…æ¥šï¼ŒåŽè¾¹å†è¡¥å……ã€‚

ç‹­ä¹‰å¼ºè°ƒå¦‚æžœä¸¤ä¸ªç±»ä¸å¿…å½¼æ­¤ç›´æŽ¥é€šä¿¡ï¼Œé‚£ä¹ˆè¿™ä¸¤ä¸ªç±»å°±ä¸åº”å½“å‘ç”Ÿç›´æŽ¥çš„ç›¸äº’ä½œç”¨ã€‚å¦‚æžœå…¶ä¸­ä¸€ä¸ªç±»éœ€è¦è°ƒç”¨å¦ä¸€ç±»çš„æŸä¸€ä¸ªæ–¹æ³•çš„è¯ï¼Œå¯ä»¥é€šè¿‡ç¬¬ä¸‰è€…è½¬å‘è¿™ä¸ªè°ƒç”¨ã€‚


å¹¿ä¹‰åˆ™æ˜¯å¯¹å°è£…çš„å¼ºè°ƒï¼Œä¹Ÿå°±æ˜¯å¯¹ä¿¡æ¯éšè—çš„æŽ§åˆ¶ã€‚æ–¹æ³•å°è£…åœ¨ç±»çš„å†…éƒ¨ï¼Œè°ƒç”¨è€…åªéœ€è¦è°ƒç”¨å¹¶èŽ·å–é¢„æœŸç»“æžœï¼Œä¸éœ€è¦å…³æ³¨å…·ä½“å®žçŽ°ã€‚


ä¸¾ä¸ªåé¢ðŸŒ°ï¼š
```php
class MySchool
{

    public function manager()
    {
        $myClass = new MyClass();
        foreach ($myClass->getClasses() as $class) {
            foreach ($class->getStudents() as $student) {
                echo $student->getName(), PHP_EOL;
            }
        }
       
    }
}
```

åœ¨ä¸Šè¾¹çš„ä¾‹å­ä¸­ï¼ŒSchool ç±»å’Œ Class ç±»å‘ç”Ÿäº¤äº’ï¼Œä½†æ˜¯ä¹Ÿå’Œ Student ç±»å‘ç”Ÿäº†äº¤äº’ï¼Œè¿åäº†æœ€å°‘çŸ¥é“åŽŸåˆ™ã€‚

å†æ¥ä¸ªä¼˜åŒ–ç‰ˆï¼š
```php
class MySchool
{

    public function manager()
    {
        $myClass = new MyClass();
        foreach ($myClass->getClasses() as $class) {
            $class->manager();
        }
       
    }
}
```

é€šè¿‡ Class ç±»ä¸­ manager æ–¹æ³•åŽ»èŽ·å–å­¦ç”Ÿä¿¡æ¯ï¼ŒSchoolä¸Ž Student ç±»çš„äº¤äº’å°±è¢«æ¸…é™¤äº†ï¼ŒSchool ä¹Ÿä¸çŸ¥é“ Class æ˜¯æ€Žä¹ˆèŽ·å– Student ä¿¡æ¯çš„ï¼Œå®ƒåªç®¡è°ƒç”¨ã€‚

emmmï¼Œè¿˜å¯ä»¥ç»§ç»­é€’è¿›ï¼ŒClass manager åªç®¡ç†è‡ªå·±çš„ä¿¡æ¯ï¼Œ ç„¶åŽè°ƒç”¨ Student managerã€‚

```php
class MySchool
{

    public function manager()
    {
        $myClass = new MyClass();
        $myClass->manager();
    }
}

class MyClass
{
    private function getClasses(): array
    {
        return [
            ...
        ];
    }

    public function manager()
    {
        foreach ($this->getClasses() as $class) {
            $student = new MyStudent();
            $student->manager();
        }
    }
}

class MyStudent
{
    private function getStudents(): array
    {
        return [
            ...
        ];
    }
    
    public function manager()
    {
        foreach ($this->getStudents() as $student) {
            echo $student->name, PHP_EOL;
        }
    }
}
```


